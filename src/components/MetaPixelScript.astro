---
export interface Props {
   pixelId: string;
}

const { pixelId } = Astro.props;
---

<script src="/js/metaPixel.js" is:inline></script>
<script define:vars={{ pixelId }}>
   document.addEventListener('DOMContentLoaded', () => {
      if (window.metaPixelUtils) {
         window.metaPixelUtils.initMetaPixel(pixelId);

         // Alias global para fácil acceso
         window.metaPixel = {
            track: window.metaPixelUtils.trackEvent,
            trackPageView: window.metaPixelUtils.trackPageView,
         };

         console.log('✅ Meta Pixel ready');
      } else {
         console.error('❌ Meta Pixel utils not loaded');
      }
   });
</script>
